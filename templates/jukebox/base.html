<html>
  <head>
    <title>JukeBox</title>
  </head>

  <body>
    <form action="search/" method="get">
      <input type="text" name="q">
      <input type="submit" value="Search">
    </form>
    <br>
    <a id="trending" href="#append">Trending</a>
    <a href="artists/">Artists</a>
    <a href="albums/">Albums</a>
    <br>
    {% if user.is_active %}
      {{ user.username }}
      <br>
      <form action="playlist/create/" method="get">
        <input type="text" name="name">
        <input type="checkbox" name="private" checked>Private
        <input type="submit" value="Create">
      </form>
      <a href="playlist/{{user.username}}/">Playlists</a>
      <a href="logout/">Logout</a>
    {% else %}
      <a href="login/">Login</a>
    {% endif %}





<div id="append">
</div>




<!--    <div id="append">
    <input type="text" id="q">
    </div>
  </body>
  <script type="text/javascript" src="{{STATIC_URL}}jquery/jquery.min.js"></script>
  <script>
    $("#q").keyup(
        function(){
          $.get("example/",
            function(data){
                  alert("data: "+data.success);
                });
              });
  </script>
-->
</body>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
  </script>
  <script>
  var items=[];
  function trending() {
    $.ajax("trending/json/",contentType= "application/json").done( function(data){ items=data; } );
    $("#append").empty();
   for (var i=0; i<items.length; i++){
     $("#append").append(get_song_html(items[i]));
   }

  }
  function get_song_html(song)
  {
    html = "<br> Song: "+ song.song+ "<br> Album: " + song.album.album +"<br> Artist: ";
    for (var j=0; j<song.artists.length; j++)
    {
      html += song.artists[j].artist + ", ";
    }
    html += "<br> Count: " + song.count + "<br>" +
      "<img src=\'{{MEDIA_URL}}" + song.album.album_art + "\' width='100px' height='100px'>" +
      "<br><br><br>";
    return html;
  }
  $("#trending").click(trending);

  </script>

</html>
