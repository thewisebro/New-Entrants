{% extends "buyandsell/base.html" %}

{% block content %}
<div class="container">

  <div class="row sub-header">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <ol class="breadcrumb">
        <li class="active"><a href="#">My Account</a></li>
      </ol>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <div class="division-line">
      </div>
    </div>
  </div>
  {% block leftbox %}
  <div class="row">
    <div class="col-md-3">
      <div class="left-box">
        <div class="row">
          <div class="col-md-12">
            <p class="your-phone-no">My Phone No.</p>
            <div class="phone-no-visibility-toggle">
              <div class="phone-no-visibility-toggle-slider">
                <div class="phone-no-visibility-toggle-options phone-no-hidden">HIDDEN</div>
                <div class="phone-no-visibility-toggle-options phone-no-visible">VISIBLE</div>
              </div>
            </div>
            <div class="phone-no-visibility-toggle-button"></div>
            <p class="phone-no-visibility-info-text">Your phone number will be visible on your posts.</p>
            <div class="left-division-line"></div>
          </div>
          <div class="col-md-12 watched-categories">
            <p class="categories-you-are-watching">Categories you are Watching</p>

            <ul>
              {% for main_cat,cat_list in watched_cat_dict.iteritems %}
              <li class="watched-main">{{ main_cat }}
                <ul class="watched-sub-in-main" >
                  {% for cat in cat_list %}
                  <li>{{ cat }}</li>
                  {% endfor %}
                </ul>

              </li>
              {% endfor %}
            </ul>
            <button type="button" onclick="manage()"  class="global-browse manage-watched-button">Manage</button>
          </div>
        </div>
      </div>
    </div>
    {% endblock %}
    <div class="col-md-9 pageContent">

      <p class="my-account-page-headings">Items you've Added for Sale</p>
      <div class="row">

        {% for row in sell_items %}

        <div class="col-md-3" id = "sell{{row.pk}}">
          <div class="thumbnailBG thumbnailBG-my-account">
            <div class="dropdown item-options-dropdown" style="display:inline">
              <button class="btn btn-default item-options-button dropdown-toggle" type="button" id="my-account-object-options" data-toggle="dropdown">
                <img src="../../static/images/buyandsell/my-account-item-options.png" class="item-options-button-image">
              </button>
              <ul class="dropdown-menu item-options-dropdown-menu" role="menu" aria-labelledby="my-account-object-options">
                <div class="arrow-up-behind" style="margin-left:74.5%; margin-top:-15.5%"></div>
                <div class="arrow-up-front" style="margin-left:75%; margin-top:-13.5%"></div>
                <li role="presentation"><a onclick ="edit_sell({{ row.pk }})" class="edit-button-text">Edit</a></li>
                <li role="presentation">
                  <a data-toggle="modal" onclick = "assign_id({{row.id}},'sell')" data-target="#remove-item-confirm-modal" class="">Remove</a>
                </li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Mark Sold</a></li>
              </ul>
            </div>

            <div class="thumbnail">
              <img src="/media/{{ row.item_image }}" alt="Generic placeholder thumbnail">
            </div>
            <div class="caption">
              <span class="itemName">{{ row.item_name }}</span>
              <span class="price">Rs. {{row.cost}}</span>
              <div class="row">
                <div class="col-md-12">
                  <span class="expiresIn">Expires in {{ row.expiry_date|timeuntil }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}



      </div>
      <div class="row">
        <div class="division-line"></div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <p class="my-account-page-headings">Items you've Requested</p>
          <table class="table table-striped">
            <thead>
            <tr data-toggle="modal" data-target="#request-item-modal" class="request">
              <th>Item</th>
              <th>Max Price (Rs)</th>
              <th>Expires in</th>
            </tr>
            </thead>
            <tbody>


            {% for row in request_items %}
            <tr id = "request{{ row.pk }}" class="request">
              <td class="requested-item-name">{{ row.item_name }}</td>
              <td class="requested-item-price">{{ row.price_upper}}</td>
              <td>{{ row.expiry_date|timeuntil }}</td>
              <td>
                <a onclick = "trash('request',{{row.id}})" class="request-remove-button">
                  <img class="request-remove-button-image" src="{{STATIC_URL}}images/buyandsell/close-button.png">
                  <span class="request-remove-button-text">Remove</span>
                </a>
                <a onclick="edit_request({{row.id}})" class="edit-button">
                  <img class="request-edit-button-image" src="{{STATIC_URL}}images/buyandsell/edit-button.png">
                  <span class="request-edit-button-text">Edit</span>
                </a>
              </td>
            </tr>

            {% endfor %}

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="remove-item-confirm-modal" tabindex="-1" role="dialog" aria-labelledby="remove-item-confirm-modal-Label" aria-hidden="true">
  <div class="modal-dialog" style="width:500px;">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" style="color:white; width:20px; height:20px">&times;</span></button>
        <h4 class="modal-title" id="modal-title">Are you Sure?</h4>
      </div>
      <div class="modal-body">
        <p class="item-removal-confirmation-text">Are you sure you want to remove this item? <br/> This cannot be undone.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary remove-item-confirm-yes" style="margin:0px auto">
          <a title="Remove" id = "modal-delete" class="item-remove-text" data-dismiss = "modal">Yes</a>
        </button>
        <button type="button" class="btn btn-primary remove-item-confirm-no" data-dismiss="modal">No</button>
      </div>
    </div>
  </div>
</div>

{% endblock %}



