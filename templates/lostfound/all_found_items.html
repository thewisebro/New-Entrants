{% extends "lostfound/base.html" %}
   {% block css %}
    <link rel="stylesheet" href="{{STATIC_URL}}css/lostfound/all_lost_items.css"/>
  {% endblock css %}
  {% block script %}
    <script type="text/javascript" src="{{STATIC_URL}}js/lostfound/all_lost_items.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}js/lostfound/confirmBox.js"></script>
  {% endblock script %}
  {% block content_header %}
    {% if found_count %}
      YOUR FOUND ITEM(S)
    {% endif %}
    {% if table_data %}
      ALL FOUND ITEMS
    {% endif %}
    {% if query %}
      FOUND ITEM
    {% endif %}
  {% endblock content_header %}
  {% block main_content %}
    <div class="item_details_header">
      <div class="item_name_header">Item Name</div>
      <div class="date_header">Date</div>
      <div class="place_header">Place</div>
      <div class="status_header">Status</div>
       <div class="posted_by_header">Posted by</div>
    </div>

    {% load macros %}
      {% macro my_macro all_lost_items %}
        <div class="item_details">
          <div class="visible_details" {% if query.pk == key %} id="visible_details_item" {% else %} {% endif %}>
            <div class="serial_number">{{forloop.counter}}</div>
            <div class="item_name">{{query.item_found}}</div>
            <div class="date">{{query.date}}</div>
            <div class="place">{{query.place}}</div>
            <div class="status">{{query.status}}</div>
            <div class="posted_by">{{query.user.get_name}}</div>
            <div style="clear:both"></div>
          </div>
          <div id="hidden_details">
            <script type="text/javascript">

            </script>
            <div class="contact_details">
              <table>
                <tr> <td>Found by :</td>        <td>{{query.user.get_name}}</td> </tr>
                <tr> <td>Contact Number :</td> <td>{{query.contact}}</td> </tr>
              </table>
            </div>
            <div class="other_details">
              <div class="label">Other details :</div><div class="details">{{query.other_details}}</div>
            </div>
            {% if query.user.username != user.username %}
              {% if query.status != 'Owner found' %}
              <div class="send_email" >
                <a href="/lostfound/sendmail/found/{{query.pk}}">
                  <img id="email_icon" src="{{STATIC_URL}}images/lostfound/email_icon.jpg"/>
                  <span>Send automatic<br/> e-mail <br/>to this person</span>
                </a>
              </div>
              {% else %}
              <div class="send_email" style="width:176px;">
                Owner has been already found.
              </div>
              {% endif %}
            {% else %}
              <div class="send_email" >
                <a href="/lostfound/edit/found/{{query.pk}}/">Edit details</a>
                &nbsp &nbsp
                <a class="delItem" name="found/{{ query.pk }}" href="javascript:void()">Delete Item</a>
                <br/>
                <br/>
                {% if query.status == 'Owner not found'%}
                  <a name="found/{{ query.pk }}" class="statusItemLost" href="javascript:void()">Change Status</a>
                {% endif %}
              </div>
            {% endif %}
            <div style="clear:both"></div>
          </div>
        </div>
      {% endmacro %}
    {% if table_data %}
      {% for query in table_data.object_list %}
      <!-- Details of a single item BEGINS -->
        {% usemacro my_macro 'all_found_items' %}
      {% endfor %}
    {% endif %}

    {% if qryst_found %}
      {% for query in qryst_found %}
        <!-- Details of a searched item BEGINS -->
        {% usemacro my_macro 'all_found_items' %}
      {% endfor %}
    {% endif %}
    {% if query %}
      <!-- Reported Item -->
       {% usemacro my_macro 'all_found_items' %}
    {% endif %}
    {% if table_data %}
      <div id="pagination_bar">
        <div >
          {% if table_data.has_previous %}
            <span class="next_page_link">
              <a href="?page={{ table_data.previous_page_number }}">Previous</a>
            </span>
          {% endif %}

          {% for page in page_list %}
            {% if table_data.number == page %}
              <span class="active_page">
                <a href="?page={{ table_data.number }}">{{table_data.number}}</a>
              </span>
            {% else %}
              <span>
                <a href="?page={{ page }}">{{ page }}</a>
              </span>
            {% endif %}
          {% endfor %}

          {% if table_data.has_next %}
            <span class="previous_page_link">
              <a href="?page={{ table_data.next_page_number }}">Next</a>
            </span>
          {% endif %}
        </div>
      </div>
    {% endif %}

  {% endblock main_content %}

